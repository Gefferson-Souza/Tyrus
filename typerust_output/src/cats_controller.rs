// Note: async/await code - formatting skipped for edition compatibility
use super::cats_service::CatsService;
# [derive (Default , Debug , Clone , PartialEq , serde :: Serialize , serde :: Deserialize)] pub struct CatsController { pub cats_service : std :: sync :: Arc < CatsService > }
# [axum :: async_trait] impl < S > axum :: extract :: FromRequestParts < S > for CatsController where S : Send + Sync { type Rejection = std :: convert :: Infallible ; async fn from_request_parts (parts : & mut axum :: http :: request :: Parts , state : & S) -> Result < Self , Self :: Rejection > { let axum :: Extension (controller) = axum :: Extension :: < std :: sync :: Arc < Self >> :: from_request_parts (parts , state) . await . expect ("Controller extension missing") ; Ok (controller . as_ref () . clone ()) } }
impl CatsController { pub fn new (cats_service : std :: sync :: Arc < CatsService >) -> Self { Self { cats_service : cats_service } } # [doc = concat ! ("Route: " , "GET" , " " , "/")] pub async fn find_all (self) -> axum :: Json < serde_json :: Value > { return axum :: Json (self . cats_service . clone () . hello () . into ()) ; } pub fn router () -> axum :: Router { axum :: Router :: new () . route ("/cats" , axum :: routing :: get (Self :: find_all)) } }
