// Note: async/await code - formatting skipped for edition compatibility
# [derive (Default , Debug , Clone , PartialEq , serde :: Serialize , serde :: Deserialize)] pub struct HttpClient < T > { pub base_url : String , # [serde (skip)] pub _marker : std :: marker :: PhantomData < T > }
impl < T : serde :: de :: DeserializeOwned + serde :: Serialize + Clone + Default + std :: fmt :: Debug > HttpClient < T > { pub fn new (base_url : String) -> Self { Self { base_url : base_url , _marker : std :: marker :: PhantomData } } pub fn new_di (base_url : String) -> Self { Self { base_url : base_url , _marker : std :: marker :: PhantomData } } pub async fn get (& mut self , path : String) -> Result < T , crate :: AppError > { return Ok (reqwest :: Client :: new () . get (self . base_url . clone () + & path) . send () . await ? . json :: < T > () . await ?) ; } }
